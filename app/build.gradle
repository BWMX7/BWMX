plugins {
    id 'com.android.application'
}

def keyProps = new Properties()
def keyPropsFile = rootProject.file('keystore/key.properties')
if (keyPropsFile.exists()) { keyProps.load(new FileInputStream(keyPropsFile)) }


android {
    compileSdk 31

    defaultConfig {
        applicationId "com.bwmx.tool"
        minSdk 27
        targetSdk 30
        versionCode 20
        versionName "3.0"
    }

    signingConfigs {
        release {
            keyAlias = keyProps['keyAlias']
            keyPassword = keyProps['keyPassword']
            storeFile = keyProps['storeFile'] ? file(keyProps['storeFile']) : null
            storePassword = keyProps['storePassword']
        }
    }

    dependencies {
        implementation 'androidx.annotation:annotation:1.2.0'
        compileOnly 'de.robv.android.xposed:api:82'
        compileOnly 'de.robv.android.xposed:api:82:sources'
    }

    buildTypes {
        release {
            minifyEnabled true
            shrinkResources true //是否清理无用资源,依赖于minifyEnabled
            zipAlignEnabled true //是否启用zipAlign压缩
            signingConfig signingConfigs.release
            enableV1Signing = true
            enableV2Signing = true
            enableV3Signing = true
        }
    }
}